---
type: specs.openrewrite.org/v1beta/recipe
name: com.example.FixKubernetesManifests
displayName: Fix Kubernetes manifest selectors
description: Updates Service selectors to match Deployment labels
recipeList:
  - com.anacoders.cookbook.yaml.ChangeYamlPropertyConditionally:
      conditions:
        - jsonPath: $.kind
          value: Deployment
        - jsonPath: $.metadata.name
          value: hello-kubernetes
      targetJsonPath: $.spec.replicas
      oldValuePattern: "(3)"
      newValue: "55"
      filePattern: "{{ targetDirectory }}/manifests.yaml"